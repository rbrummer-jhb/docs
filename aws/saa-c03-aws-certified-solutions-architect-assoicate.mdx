---
title: "SAA-C03 AWS Certified Solutions Architect Assoicate"
description: "A Cloud Guru 04/2025"
icon: ""
---

<Icon icon="aws" size={64} />

- Chapter 1 - Introduction
- [Chapter 2 - AWS Fundamentals](#chapter-2---aws-fundamentals)
- [Chapter 3 - Identity and Access Management](#chapter-3---identity-and-access-management)
- [Chapter 4 - Simple Storage Service S3](#chapter-4---simple-storage-service-s3)
- [Chapter 5 - Elastic Cloud Compute EC2](#chapter-5---elastic-cloud-compute-ec2)
- [Chapter 6 - Elastic Block Storage EBS and Elastic File System EFS](#chapter-6---elastic-block-storage-ebs-and-elastic-file-system-efs)
- [Chapter 7 - Databases](#chapter-7---databases)
- [Chapter 8 - Virtual Private Cloud VPC Networking](#chapter-8---virtual-private-cloud-vpc-networking)
- [Chapter 9 - Route 53](#chapter-9---route-53)
- [Chapter 10 - Elastic Load Balancing ELB](#chapter-10---elastic-load-balancing-elb)
- [Chapter 11 - Monitoring](#chapter-11---monitoring)
- [Chapter 12 - High Availability and Scaling](#chapter-12---high-availability-and-scaling)
- [Chapter 13 - Decoupling Workflows](#chapter-13---decouling-workflows)
- [Chapter 14 - Big Data](#chapter-14---big-data)
- [Chapter 15 - Serverlesss Architecture](#chapter-15---serverless-architecture)
- [Chapter 16 - Security](#chapter-16---security)
- [Chapter 17 - Automation](#chapter-17---automation)
- [Chapter 18 - Caching](#chapter-18---caching)
- [Chapter 19 - Governance](#chapter-19---governance)
- [Chapter 20 - Migration](#chapter-20---migration)
- [Chapter 21 - Front-End Web and Mobile](#chapter-21---front-end-web-and-mobile)
- [Chapter 22 - Machine Learning](#chapter-22---machine-learning)
- [Chapter 23 - Media](#chapter-23---media)

# Chapter 2 - AWS Fundamentals

- [Availability Zones and Regions](#availability-zones-and-regions)
- [Shared Responsibility Model](#shared-responsibility-model)
- [Compute, Storage, Databases, and Networking](#compute-storage-databases-and-networking)
- [The Well-Architected Framework](#the-well-architected-framework)
- [Quiz: Availability Zones and Regions](#quiz-availability-zones-and-regions)

## Availability Zones and Regions

### AWS Global Infrastructure

![AWS Global Infrastructure](../images/aws-global-infrastructure.png)

### Availability Zones

Think of an Availability Zone as a **Data Center**.

### Data Centers

A data center is just a building filled with **servers**.

An Availability Zone may be several data centers, but because they are close together, they are counted as **1 Availability Zone**.

### Regions

A geographical area. Each Region consists of **2 (or more) Availability Zones**.

<Note>
  **Upate:** AWS now defines Regions as **3 or more Availability Zones**.
</Note>

### Edge Locations

Endpoints for AWS that are used for caching content.

- Typically, this consists of **CloudFront**, Amazon's Content Delivery Network (CDN).
- There are **many more edge locations** that Regions.
- Currently, there are **over 215 edge locations**.

### Exam Tips

<Note>
**A Region** is a physical location in the world that consists of 2 or more Availability Zones (AZs).

**An AZ** is 1 or more discrete data centers - each with redundant power, networking, and connectivity - housed in separate facilities.

**Edge Locations** are endpoints for AWS that are used for caching content.

</Note>

## Shared Responsibility Model

### Renting Resources in the Cloud

Who's responsible for what?

| You              | Rental Company   |
| :--------------- | :--------------- |
| Not to damage it | Tire pressure    |
| Not to speed     | Full tank of gas |
| Pay tolls, etc   | Mechanics        |

### The Model

| Customer: Responsiblity for Security IN the Cloud            | AWS: Responsibility for Security OF the Cloud |
| :----------------------------------------------------------- | :-------------------------------------------- |
| Customer Data                                                | Software                                      |
| Platform, Applications, Identitiy & Access Management        | Compute, Storage, Database, Networking        |
| Operating System, Network & Firewall Configuration           | Hardware/AWS Global Infrastructure            |
| Client-Side Data Encryption & Data Integrity Authentication  | Regions                                       |
| Server-Side Encryption (File System and/or Data)             | Availability Zones                            |
| Network Traffic Protection (Encryption, Integrity, Identity) | Edge Locations                                |

### Exam Tips

<Note>
**Can you do this yourself in the AWS Managemenet Console?**

**If yes, you are likely responsible.** Security groups, IAM users, patching EC2 operating systems, patching databases running on EC2, etc.

**If not, AWS is likely responsible.** Management of data centers, security cameras, cabling, patching RDS operating systems, etc.

**Encryption is a shared responsiblity.**

</Note>

## Compute, Storage, Databases, and Networking

### Compute

You wouldn't be able to build an application without compute power - you need something crunching the data.

- EC2
- Lambda
- Elastic Beanstalk

### Storage

Like a giant disk in the cloud - it's a safe place to save your information.

- S3
- EBS
- EFS
- FSx
- Storage Gateway

### Databases

Like a spreadsheet - a reliable way to store and retrieve information.

- RDS
- DynamoDB
- Redshift

### Networking

A way for compute, storage, and databases to communicate and to live.

- VPCs
- Direct Connect
- Route 53
- API Gateway
- AWS Global Accelerator

### Exam Tips

<Note>
**Compute:** EC2, Lambda, Elastic Beanstalk.

**Storage:** S3, EBS, EFS, FSx, Storage Gateway.

**Databases:** RDS, DynamoDB, Redshift.

**Networking:** VPCs, Direct Connect, Route 53, API Gateway, AWS Global Accelerator.

</Note>

## The Well-Architected Framework

### AWS Whitepapers

AWS has hundreds of whitepapers available - `https://aws.amazon.com/whitepapers`.

### The 6 Pillars

**Operational Excellence**

Running and monitoring systems to deliver business value, and continually improving processes and procedures.

**Performance Efficiency**

Using IT computing resources efficiently.

**Security**

Protecting information and systems.

**Cost Optimization**

Avoiding unnecessary costs.

**Reliability**

Ensuring a workload performs its intended function correctly and consistently when it's expected.

**Sustainability**

Minimizing the environmental impacts of running cloud workloads.

### Exam Tips

<Note>**Read the Whitepaper.**</Note>

## Quiz: Availability Zones and Regions

<Note>
**Which statement best describes an Availability Zone?**

One or more discrete data centers with redundant power, networking, and connectivity in an AWS Region.

**Why is security one of the pillars of the Well-Architected Framework?**

Because security is the highest priority at AWS; if you don't have a securely built application, your customers won't trust you with their data.

**Which of the following is NOT an AWS storage service?**

EC2

**Which one of the following items are NOT managed by AWS according to the shared responsibility model?**

Customer data.

**What category would the VPC service fall into?**

Networking.

</Note>

# Chapter 3 - Identity and Access Management

- [Securing the Root Account](#securing-the-root-account)
- [IAM Policy Documents](#iam-policy-documents)
- [Permanent IAM Credentials](#permanent-iam-credentials)
- [Quiz: Identity and Access Management](#quiz-identity-and-access-management)

## Securing the Root Account

### What is IAM

Allows you to manage users and their level of access to the AWS console.

- Create users and grant permissions to them.
- Create groups and roles.
- Control access to AWS resources.

### What is the Root Account

The `root account` is the email address you used to sign up for AWS. It has full administrative access to AWS. It is important to secure this account.

### Exam Tips

<Note>
Enable multi-factor authentication on the root account.

Create an admin group for your administrators, and assign the appropriate permissions to this group.

Create user accounts for your administrators.

Add your users to the admin group.

</Note>

## IAM Policy Documents

### Permissions with IAM

We assign permissions using policy documents, which are made up of JSON (JavaScript Object Notation).

### JSON Example of Policy Documents

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "*",
      "Resource": "*"
    }
  ]
}
```

## Permanent IAM Credentials

### The Building Blocks of IAM

- **Users** - a physical person.
- **Groups** - Functions, such as administrator, developer, etc. Contains users.
- **Roles** - Internal usage within AWS.

### Best Practices: Policies

<Tip>It's best practice for users to **inherit permissions** from groups.</Tip>

### Best Practices: Users and People

Always work on the principle that one users **equals** one physical person. Never share user accounts across multiple people.

### The Principle of Least Privilege

Only assign a user the **minimum** amount of privileges they need to do their job.

<Tip>Some AWS policies are a **Job function** type.</Tip>

### Identity Providers

Allow you to connect IAM to external identity providers like **Azure AD**, under **IAM** > **Access management** > **Identity providers**.

### Exam Tips

<Note>
**IAM is universal:** It does not apply to regions at this time.

**The Root Account:** The account created when you first set up your AWS account and which has complete admin access. Secure it as soon as possible and **do not** use it to log in day to day.

**New Users:** No permissions when first created.

**Access key ID and secret access keys are not the same as usernames and passwords.**

**You only get to view these once.** If you lose them, you have to regenerate them. So, save them in a secure location.

**Always setup password rotations.** You can create and customize your own password rotation policies.

**IAM Federation:** You can combine your existing user account with AWS. For example, when you log on to your PC (usually using Microsoft Active Directory), you can use the same credentials to log in to AWS if you set up federation.

**Identity Federation in Azure:** Uses the `SAML` standard through Azure Active Directory (Azure AD), which enables seamless and secure authentication across various systems, allowing users to access multiple apps with a single set of credentials.

</Note>

### Lab: Create & Assume Roles

**Create the `S3RestrictPolicy` IAM Polciy**

- Navigate to **S3** and review the four provisioned buckets; two of them have `customerdata` in the name, and the other two have appconfigprod in the name. You will be restricting access in the `appconfigprod` buckets.
- Navigate to **IAM** by searching for it in the top search bar. Then, right-click and open **IAM** in a new tab.
- In the left navigation menu under **Access Management**, click Users and review the available users.
- In the left navigation menu under **Access Management**, click **Policies**.
- Click **Create Policy**.
- Under **Select a service**, click **S3**.
- Under **Actions allowed**, select **All S3 actions**.
- Under **Resources**, select the **Any in this account** checkbox for all the listed resources except for **bucket** and **object**.
- For **object**, select the **Any** checkbox.
- Navigate back to S3 browser tab.
- Copy the bucket name containing `appconfigprod1`.
- Return to the IAM browser tab.
- In **Resources**, next to **bucket**, click **Add ARNs**.
- In the **Resource bucket name** field, paste in the bucket name you just copied, and click **Add ARNs**.

<Note>Ensure there's no trailing whitespace after the bucket name.</Note>

- Return to S3 and repeat the process with the bucket name containing `appconfigprod2`.
- In IAM, once both buckets are added, click **Next**.
- On the **Review and create** page, next to **Policy name**, enter `S3RestrictedPolicy`, and click **Create policy**.
- Once the policy has been created, use the search bar to search for the `S3RestrictedPolicy`. Click on the + icon next to the policy and review the configuration.
- Click on the `S3RestrictedPolicy` policy to navigate into it.
- Click the **Entities attached** tab.
- Under **Attached as a permissions policy**, click **Attach**.
- Select the checkbox next to `user1`.
- Click **Attach policy**.

**Create the IAM Role**

- Click **Roles** in the left navigation menu.
- Click **Create role**.
- Under **Trusted entity type**, select **AWS account**.
- Under **An AWS account**, select **This account**.
- Copy the account ID in parentheses, and paste it to a text file as you'll need it later.
- Click **Next**.
- Use the search bar to look for the `S3RestrictedPolicy` and click the checkbox next to it.
- Click **Next**.
- In **Role name**, enter `S3RestrictedRole`. You should see that the trusted entity is your account number. This means that anything that is in this account can assume this role.
- Click **Create role**.

**Ensure `user2` Can Assume the Role**

- Click **Users** in the left navigation menu.
- Click `user2`.
- Under **Summary**, copy the **ARN**.
- Click **Roles** in the left navigation menu.
- In the **Roles** search bar, enter `S3`, and select the `S3RestrictedRole`.
- Click the **Trust relationships** tab.
- Click **Edit trust policy**.
- In line `7`, delete the ARN, and paste in the ARN you previously copied for `user2`. Make sure to leave the quotation marks.
- Click **Update policy**.

**Test IAM Policy and Role Configuration**

- Navigate to the upper right corner, and copy the account ID to your clipboard.
- Click **Sign out**.
- Click **Log back in**.
- For **Account ID**, paste in the account ID you previously copied.
- For **IAM user name**, enter `user1`.
- For **Password**, enter the password listed in the **Additional Information and Resources** section for `user1`.
- Once signed in, navigate to EC2 to check whether you have access; you should see **API Error**, meaning you cannot access anything within EC2.
- Navigate to **S3**, and click on one of the `customerdata` buckets. You should see that you do not have access to this bucket.
- Click on the **Buckets** breadcrumb at the top of the screen. Navigate to one of the `appconfigprod` buckets and open it; you should have access.
- Repeat steps 1-9 using the `user2` credentials provided in the **Additional Information and Resources** section. This time, you shouldn't have access to any of the buckets.
- Navigate to the upper right corner, and copy the account ID to your clipboard.
- Click **Switch role**.
- For account, paste in the account ID you previously copied.
- For **Role**, enter `S3RestrictedRole`. Make sure it's spelled correctly.
- Select the color of your choice, then click **Switch Role**.
- In the S3 console, you should now be able to see the `appconfigprod` buckets.
- Click on one of the `customerdata` buckets; you should see an **Insufficient permissions** message.
- In the upper left breadcrumb trail, click **Buckets**, then click on one of the `appconfigprod` buckets to confirm you have access.

<Note>
  Once you don't need the specified permissions, you can switch back to user2 by
  clicking on the account ID in the upper right corner and selecting Switch
  back.
</Note>

### Quiz: Identity and Access Management

<Note>
What does the "EAR" in a policy document stand for?

**Effect, Action, Resource**

Which of the following statements about policy documents are true?

**An explicit deny overrides an allow.**

What is a crucial step in securing your AWS account?

**Enable MFA on the root account, and on any admin user account.**

Which of the following is the recommended approach for securing your AWS account?

**Create user accounts for your administrators, add them to the admin group, assign the appropriate permissions to the group, and enable MFA on the root and any admin user account.**

Why is it dangerous to use the AWS root user account?

**The root user account has full permissions to every service.**

</Note>

# Chapter 4 - Simple Storage Service S3

- [S3 Overview](#s3-overview)
- [Securing your Bucket with S3 Block Public Access](#securing-your-bucket-with-s3-block-public-access)
- [Hosting a Static Website](#hosting-a-static-website)
- [Versioning Objects in S3](#versioning-objects-in-s3)
- [S3 Storage Classes](#s3-storage-classes)
- [Lifecycle Management with S3](#lifecycle-management-with-s3)
- [S3 Object Lock and Glacier Vault Lock](#s3-object-lock-and-glacier-vault-lock)
- [Encrypting S3 Objects](#encrypting-s3-objects)
- [Optimizing S3 Performance](#optimizing-s3-performance)
- [Backing up Data with S3](#backing-up-data-with-s3)
- [Lab: Set Up Cross-Region Bucket Replication](#lab-set-up-cross-region-bucket-replication)
- [Lab: Creating a Static Website Using S3](#lab-creating-a-static-website-with-s3)
- [Lab: Creating S3 Buckets, Managing Objects, and Enabling Versioning](#lab-creating-s3-buckets-managing-objects-and-enabling-versioning)
- [Quiz; Simple Storage Service S3](#quiz-simple-storage-service-s3)

## S3 Overview

### What Is S3

- **Object Storage** - provides secure, durable, highly scalable object storage.
- **Scalable** - store and retrieve any amount of data from anywhere on the web at a very low cost.
- **Simple** - easy to use, with a simple web service interface.

**Object-based Storage**

Manages data as objects rather than in file systems or data blocks.

- **Upload any file type** you can think of to S3.
- **Examples** include photos, videos, code, documents, and text files.
- **Cannot** be used to run an operating system or database.

### S3 Basics

- **Unlimited Storage** - the total volume of data and the number of objects you can store is unlimited.
- **Objects up to 5 TB in Size** - S3 objects can range in size from a minimum of 0 bytes to a maximum of 5 TB.
- **S3 Buckets** - store files in buckets (similar to folders).

### Working with S3 Buckets

- **Universal Namespace** - all AWS accounts share the S3 namespace. Each S3 bucket name is globally unique.
- **Example S3 URLs** - `https://bucket-name.s3.Region.amazonaws.com/key-name.
- **Uploading Files** - when you upload a file to an S3 bucket, you will receive an HTTP 200 code if the upload was successful.

### Key-Value Store

- **Key** - the name of the object.
- **Value** - the data itself, which is made up of a sequence of bytes.
- **Version ID** - important for storing multiple versions of the same object.
- **Metadata** - data about the data you are storing (e.g. `content-type`, `last-modified`, etc).

### Availability & Durability

The data is spread across multiple devices and facilities to **ensure availability** and **durability**.

- **Built for Availability** - built for 99.95% - 99.99% **service availability**, depending on the S3 tier.
- **Designed for Durability** - designed for 99.999999999% (9 decimal places) durability for **data stored** in S3.
- Suitable for most workloads.
  - The default storage class.
  - Use cases include website, content distribution. mobile and gaming apps, and big data analytics.

### Characteristics

- **Tiered Storage** - S3 offers a range of storage classes designed for different use cases.
- **Lifecycle Management** - define rules to automatically transition objects to a cheaper storage tier or delete objects that are no longer required after a set period of time.
- **Versioning** - with versioning, all versions of an object are stored and can be rertieved, including deleted objects.

### Securing your Data

- **Server-Side Encryption** - you can set default encryption on a bucket to encrypt all new objects whe they are stored in the bucket.
- **Access Control Lists (ACLs)** - define which AWS accounts or groups are granted access and the type of access. You can attach S3 ACLs to individual objects within a bucket.
- **Bucket Policies** - S3 bucket policies specify what actions are allowed or denied.

### Consistency Model

**Strong Read-After-Write Consistency**

- **After a successful write** of a new object (`PUT`) or an overwrite of an existing object, any subsequent read request immediately receives the latest version of the object.
- **Strong consistency** for list operations, so after a write, you can immediately perform a listing of the objects in a bucket with all the changes reflected.

### Exam Tips

<Note>
**Object Based** - object based-storage allows you to upload files.

**Files up to 5 TB** - files can from 0 bytes to 5 TB.

**Not OS or DB Storag** - not suitable to install an operating system or run a database on.

**Unlimited Storage** - the total volume of data and the number of objects you can store is unlimited.

S3 is a universal namespace.

Successful CLI or API uploads will generate an **HTTP 200 status code**.

**Key** - the object name.

**Value** - the data itself, which is made up of a sequence of bytes.

**Version ID** - allows you to store multiple versions of the same object.

**Metadata** - data about the data you are storing.

</Note>

## Securing your Bucket with S3 Block Public Access

### Object ACLs vs Bucket Policies

- **Object ACLs** - work on an **individual object** level.
- **Bucket Policies** - work on an **entire bucket** level.

### Exam Tips

<Note>
**Buckets are private by default:** when you create an S3 bucket, it is private by default (including all objects within it). You have to allow public access on both the **bucket** and its **objects** in order to make the bucket public.

**Object ACLs:** you can make **individual objects** public using object ACLs.

**Bucket policies:** you can make **entire buckets** public using bucket policies.

**HTTP status code:** when you upload an object to S3 and it's successful, you will receive an **HTTP 200** code.

</Note>

## Hosting a Static Website

### Static Websites on S3

You can use S3 to host static websites, such as `.html` sites.

- **Dynamic websites**, such as those that require **database connections**, cannot be hosted on S3.

### Automatic Scaling

**S3 scales automatically to meet demand.**

- Many enterprises will put static websites on S3 when they think there is going to be a large number of requests (e.g. for a movie preview).

### Hosting a Static Website

**Enable Static Website Hosting**

- On a **Bucket**, select **Properties**.
- Select `Edit` on **Static website hosting**.
- Toggle `Enable`.
- Toggle `Host a static website`.
- Under **Index document**, enter the home page of the site - `index.html`
- Under **Error document (optional)**, enter the error page of the site - `error.html`.
- Select `Save changes`.

**Upload Site Files**

- On the **Bucket**, select **Objects**.
- Select **Upload**.
- Select **Add files**.

**Enable Public Access**

- On the **Bucket**, select **Permissions**.
- Under **Bucket Policy**, select **Edit**.
- Paste in the policy `json` code.

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadGetObject",
      "Effect": "Allow",
      "Principal": "*",
      "Action": ["s3:GetObject"],
      "Resource": ["arn:aws::s3:::BUCKET_NAME/*"]
    }
  ]
}
```

### Exam Tips

<Note>
**Bucket Policies:** make entire buckets public using bucket policies.

**Static Content:** use S3 to host static content only (not dynamic).

**Automatic Scaling:** S3 scales automatically with demand.

</Note>

## Versioning Objects in S3

### What is Versioning

You can enable versioning in S3 so you can have **multiple versions of an object within S3**.

- **All Versions** - all versions of an object are stored in S3. This includes all writes and even if you delete an object.
- **Backup** - can be a great backup tool.
- **Cannot Be Deleted** - once enabled, versioning cannot be disabled - only suspended.
- **Lifecycle Rules** - can be integrated with lifecycle rules.
- **Supports MFA** - can support multi-factor authentication.

<Note>Previous versions of an object are **not publicly accessible**.</Note>

### Exam Tips

<Note>
**All versions:** all versions of an object are stored in S3. This includes all writes and even if you delete an object.

**Backup:** can be a great backup tool.

**Cannot be Disabled:** once enabled, versioning cannot be disabled - only suspended.

**Lifecycle Rules:** can be integrated with lifecycle rules.

**Suports MFA:** can support multi-factor authentication.

</Note>

## S3 Storage Classes

### S3 Standard

- **High Availability & Durability** - data is stored redundantly across multiple devices in multiple facilities (>=3 AZs):

  - 99.99% availability.
  - 99.999999999% durability (11 9's).

- **Designed for Frequent Access** - perfect for frequently accessed data.
- **Suitable for Most Workloads**
  - The default storage class.
  - Use cases include websites, content distribution, mobile and gaming apps, and big data analytics.

### S3 Standard-Infrequent Access (S3 Standard-IA)

- **Rapid Access** - used for data that is accessed less frequently but requires rapid access when needed.
- **You Pay to Access the Data** - There is a low per-GB storage price and per-GB retrieval fee.
- **Use Cases** - great for long-term storage, backups, and as a data store for disaster recovery files.

### S3 One Zone-Infrequent Access

Like S3 Standard-IA, but data is stored redundantly within a single AZ.

- Costs **20% less** than regular S3 Standard-IA.
- Great for long-lived, infrequently accessed, non-critical data.
- 99.5% Availability.
- 99.999999999% Durability.

### S3 Intelligent Tiering

**Frequent & Infrequent Access**  
Automatically moves your data to the most cost-effective tier based on how frequently you access each object.

**Optimizes Cost**  
Monthly fee of $0.0025 per 1000 objects.

### 3 Glacier Options

- You pay each time you access your data.
- Use only for archiving data.
- Glacier is cheap storage.
- Optimized for data that is infrequently accessed.

**Option 1 - Glacier Instant Retrieval**  
Provides **long-term data archiving** with instant retrieval time for your data.

**Option 2 - Glacier Flexible Retrieval**  
Ideal storage class for archive data that does not require immediate access but needs the flexibility to retrieve large sets of data at no cost, such as backup or disaster recovery use cases. Can be minutes or up to 12 hours.

**Option 3 - Glacier Deep Archive**  
Cheapest storage class and designed for customers that retain data sets for 7-10 years or longer to meet customer needs and regulatory compliance requirements. The standard retrieval time is 12 hours, and the bulk retrieval time is 48 hours.

### Performance Across S3

|                                     | S3 Standard            | S3 Intelligent-Tiering | S3 Standard-IA         | S3 One Zone-IA         | S3 Glacier Instant Retrieval | S3 Glacier Flexible Retrieval | S3 Glacier Deep Archive |
| :---------------------------------- | :--------------------- | :--------------------- | :--------------------- | :--------------------- | :--------------------------- | :---------------------------- | :---------------------- |
| **Designed for Durability**         | 99.999999999% (11 9's) | 99.999999999% (11 9's) | 99.999999999% (11 9's) | 99.999999999% (11 9's) | 99.999999999% (11 9's)       | 99.999999999% (11 9's)        | 99.999999999% (11 9's)  |
| **Designed for Availability**       | 99.99%                 | 99.9%                  | 99.9%                  | 99.5%                  | 99.9%                        | 99.99%                        | 99.99%                  |
| **Availability SLA**                | 99.9%                  | 99%                    | 99%                    | 99%                    | 99.9%                        | 99.9%                         | 99.9%                   |
| **Availability Zone(s)**            | >=3                    | >=3                    | >=3                    | 1                      | >=3                          | >=3                           | >=3                     |
| **Min Capacity Charge per Object**  | N/A                    | N/A                    | 128 KB                 | 128 KB                 | 128 KB                       | 40 KB                         | 40 KB                   |
| **Minimum Storage Duration Charge** | N/A                    | 30 days                | 30 days                | 30 days                | 90 days                      | 90 days                       | 180 days                |
| **Retrieval Fee**                   | N/A                    | N/A                    | Per GB retrieved       | Per GB retrieved       | Per GB retrieved             | Per GB retrieved              | Per GB retrieved        |
| **Storage Type**                    | Object                 | Object                 | Object                 | Object                 | Object                       | Object                        | Object                  |
| **Lifecycle Transitions**           | Yes                    | Yes                    | Yes                    | Yes                    | Yes                          | Yes                           | Yes                     |

### Storage Costs

| S3 Storage Classes Costs                                                                                        | Storage Pricing                            |
| :-------------------------------------------------------------------------------------------------------------- | :----------------------------------------- |
| **S3 Standard** - General-purpose storage for any type of data, typically used for frequently accessed data.    | Highest Cost                               |
| First 50 TB / Month                                                                                             | $0.023 per GB                              |
| Next 450 TB / Month                                                                                             | $0.022 per GB                              |
| Over 500 TB / Month                                                                                             | $0.021 per GB                              |
| **S3 Intelligent-Tiering** - Automatic cost savings for data with unknown or changing access patterns.          | Cost optimized for unknown access patterns |
| Frequent Access Tier, First 50 TB / Month                                                                       | $0.023 per GB                              |
| Frequent Access Tier, Next 450 TB / Month                                                                       | $0.022 per GB                              |
| Frequent Access Tier, Over 500 TB / Month                                                                       | $0.021 per GB                              |
| Monitoring & Automation, All Storage / Month                                                                    | $0.0025 per 1000 objects                   |
| **S3 Standard-Infrequent Access** - for long-lived but infrequently accessed data that needs millisecond access | Retrieval fees applies                     |
| All Storage / Month                                                                                             | $0.0125 per GB                             |
| **S3 One Zone-Infrequent Access** - for recreateable infrequently accessed data that needs millisecond access.  | Retrieval fees applies                     |
| All Storage / Month                                                                                             | $0.01 per GB                               |

| S3 Glacier Storage Costs                                                                                                                                                                                                                                                        | Storage Pricing |
| :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-------------- |
| **S3 Glacier** - for long-lived archive data accessed once a quarter with instant retrieval in milliseconds.                                                                                                                                                                    |                 |
| All Storage / Month                                                                                                                                                                                                                                                             | $0.004 per GB   |
| **S3 Glacier Flexible Retrieval** - ideal storage class for archive data that does not require immediate access but needs the flexibility to retrieve large sets of data at no cost, such as backup or disaster recovery use cases. Can be minutes or up to 12 hours.           |                 |
| All Storage / Month                                                                                                                                                                                                                                                             | $0.0036 per GB  |
| **S3 Glacier Deep Archive** - cheapest storage class and designed for customers that retain data sets for 7-10 years or longer to meet customer needs and regulatory compliance requirements. The standard retrieval time is 12 hours, and the bulk retrieval time is 48 hours. |                 |
| All Storage / Month                                                                                                                                                                                                                                                             | $0.00099 per GB |

## Lifecycle Management with S3

### What is Lifecycle Management

Automates moving your objects between the different storage tiers, thereby maximizing cost effectiveness.

- S3 Standard - Keep for 30 Days.
- S3 IA - After 30 Days.
- Glacier - After 90 Days.

### Lifecycle Management & Versioning

You can use lifecycle management to **move different versions** of objects to **different storage tiers**.

### Exam Tips

<Note>
Automate moving objects between different storage tiers.

Can be used in conjunction with versioning.

Can be applied to current versions and previous versions.

</Note>

## S3 Object Lock and Glacier Vault Lock

### S3 Object Lock

Use to store objects using a **write once, read many (WORM)** model. It can help prevent objects from being deleted or modified for a fixed amount of time or indefinitely.

Use to meet regulatory requirements that require WORM storage, or add an extra layer of protection against object changes and deletion.

### Governance Mode

**Users can't overwrite or delete an object version or alter its lock settings** unless they have special permissions.

Protect objects against being deleted by most users, but you can still grant some users **permission to alter retention settings** or delete the object if necessary.

### Compliance Mode

**A protected object version can't be overwritten or deleted by any user**, including the root user in your AWS account. When an object is locked in compliance mode, its retenetion mode can't be changed and its retention period can't be shortened. Compliance mode ensures an object version **can't be overwritten or deleted** for the duration of the retention period.

### Retention Periods

**Protects an object version for a fixed amount of time**. When you place a retention period on an object version, S3 stores a timestamp in the object version's metadata to indicate when the retention period expires.

After the retention period expires, the object version can be **overwritten or deleted** unless you also placed a legal hold on the object version.

### Legal Holds

Enable you to place a legal hold on an object version. Like a retention period, a legal hold **prevents an object version from being overwritten or deleted**. However, legal hold does not have an associated retention period and remains in effect until removed by any user who has the `s3:PutObjectLegalHold` permission.

### Glacier Vault Lock

Allows you to **easily deploy and enforce compliance controls for individual S3 Glacier vaults with a vault lock policy**. You can specify controls, such as WORM, in a vault lock policy and lock the policy from future edits. Once locked, the policy can no longer be changed.

### Exam Tips

<Note>
Use **S3 Object Lock** to store objects using a write once, read many (WORM) model.

Object Lock can be on **individual objects** or applied **across the bucket** as a whole.

Object Lock comes in 2 modes: **governance mode** and **compliance mode**.

**Compliance Mode** - a protected object version can't be overwritten or deleted by any user, including the root user.

**Governance Mode** - users can't overwrite or delete an object version or alter its lock settings unless they have special permissions.

S3 Glacier Vault Lock allows you to **easily deploy** and **enforce compliance controls** for individual S3 Glacier vaults with a vault lock policy.

You can **specify controls, such as WORM, in a vault lock policy and lock the policy from future edits**. Once locked, the policy can no longer be changed.

</Note>

## Encrypting S3 Objects

### Types of Encryption

**Encryption in Transit**

- SSL/TLS
- HTTPS

**Encryption at Rest: Server-Side Encryption**

- **SSE-S3:** S3-managed keys, using AES 256-bit encryption.
- **SSE-KMS:** AWS Key Management Service-managed keys.
- **SSE-C:** Customer-provided keys.

**Encryption at Rest: Client-Side Encryption**

- Encrypt the files yourself before you upload them to S3.

### Enforcing Server-Side Encrypyion

All Amazon S3 buckets have encryption configured by default. All objects are automatically encrypted by using server-side encryption with Amazon S3 managed keys (SSE-S3).

**This encryption applies to all objects in your Amazon S3 buckets.**

Every time a file is uploaded to S3, a `PUT` request is initiated.

**`x-amz-server-side-encryption`**  
If the file is to be encrypted at upload time, this parameter will be included in the request header.

**2 Options**

- `x-amz-server-side-encryption: AES256` (SSE-S3 - S3-managed keys)
- `x-amz-server-side-encryption: aws:kms` (SSE-KMS - KMS-managed keys)

**`PUT` Request Header**  
When this parameter is included in the header of the `PUT` request, it tells S3 to encrypt the object at the time of upload, using the specified encryption method.

You can create a bucket policy that denies any S3 `PUT` request that doesn't include the `x-amz-server-side-encryption` parameter in the request header.

### Exam Tips

<Note>
**Encryption in Transit**  
SSL/TLS  
HTTPS

**Encryption at Rest: SSE**  
Server-Side Encryption  
SSE-S3 (AES-256-bit)  
SSE-KMS  
SSE-C

**Client-Side Encryption**  
You encrypt the files yourself before you upload them to S3.

**Enforcing Encryption with a Bucket Policy**  
A bucket policy can deny all `PUT` requests that don't include the `x-amz-server-side-encryption` parameter in the request header.

</Note>

## Optimizing S3 Performance

### S3 Prefixes

- `mybucketname/folder1/subfolder1/myfile.jpg` > **/folder1/subfolder1**
- `mybucketname/folder2/subfolder1/myfile.jpg` > **/folder2/subfolder1**
- `mybucketname/folder3/myfile.jpg` > **/folder3**
- `mybucketname/folder4/subfolder4/myfile.jpg` > **/folder4/subfolder4**

### S3 Performance

S3 has extremely low latency. You can get the first byte out of S3 within **100-200 milliseconds**.

You can also achieve a high number of requests: **3500 `PUT`/`COPY`/`POST`/`DELETE`** and **5500 `GET`/`HEAD`** requests per second, per prefix.

You can get better performance by spreading your reads across **different prefixes**. For example, if you are using **2 prefixes**, you can achieve **22000 requests per second**.

### Limitations with KMS

S3 limitations when using KMS

- If you are using **SSE-KMS** to encrypt your objects in S3, you must keep in mind the **KMS limits**.
- When you **upload** a file, you will call `GenerateDataKey` in the KMS API.
- When you **download** a file, you will call `Decrypt` in the KMS API.

**KMS Request Rates**

- Uploading/downloading will count toward the **KMS quota**.
- Currently, you **cannot** request a quota increase for KMS.
- Region-specific, however, it's either **5500**, **10000**, or **30000** requests per second.

### S3 Performance: Uploads

**Multipart Uploads**

- Recommended for files **over 100 MB**.
- Required for files **over 5 GB**.
- Parallelize uploads (increases **efficiency**).

### S3 Performance: Downloads

**S3 Byte-Range Fetches**

- Parallelize **downloads** by specifying byte ranges.
- If there's a failure in the download, it's only for a specific byte range.
- Can be used to **speed up** downloads.
- Can be used to download **partial amounts of the file** (e.g. header information).

### Exam Tips

<Note>
`mybucketname/folder1/subfolder1/myfile.jpg` > **/folder1/subfolder1**

You can also achieve a high number of requests: **3500 `PUT`/`COPY`/`POST`/`DELETE`** and **5500 `GET`/`HEAD`** requests per second, per prefix.

You can get better performance by spreading your reads across **different prefixes**. For example, if you are using **2 prefixes**, you can achieve **11000 requests per second**.

Uploading/downloading will count toward the **KMS quota**.

Region-specific, however, it's either **5500**, **10000**, or **30000** requests per second.

Currently, you **cannot** request a quota increase for KMS.

Use **multipart uploads** to increase performance when **uploading files** to S3.

Should be used for any files **over 100 MB** and must be used for any file **over 5 GB**.

Use **S3 byte-range fetches** to increase performance when **downloading files** to S3.

</Note>

## Backing up Data with S3

### S3 Replication

**You can replicate objects from one bucket to another.**  
Versioning must be enabled on both the source and destination buckets.

**Objects in an existing bucket are not replicated automatically.**  
Once replication is turned on, all subsequent updated objects will be replicated automatically.

**Delete markers are not replicated by default.**  
Deleting individual versions or delete markers will not be replicated.

### Exam Tips

<Note>
You can **replicate objects** from one bucket to another.

Objects in an existing bucket are **not replicated automatically**.

Delete markers are **not replicated by default**.

</Note>

## Lab: Set Up Cross-Region Bucket Replication

### Create an S3 Bucket and Enable Replication

- In the AWS console, navigate to S3.
- Copy the name of the lab-provided `appconfigprod1` bucket.
- Click on the **Region** dropdown in the upper right corner of the console and change it to **US West (Oregon) us-west-2**.
- Click **Create bucket**.
- In the **Bucket name** field, paste the name you copied, but replace `appconfigprod1` with `appconfigprod2`.
- Under **Copy settings from existing bucket**, click **Choose bucket**.
- Select the `appconfigprod1` bucket.
- Click **Choose bucket**.
- Leave the rest of the settings as the defaults, and click **Create bucket**. If you receive a warning about system tags, you can safely ignore it.
- Click the `appconfigprod1` bucket to open it.
- Click the **Management** tab.
- In the **Replication rules** section, click **Create replication rule**.
- Click **Enable Bucket Versioning**.
- Set the following values:
  - Under **Replication rule configuration**, in **Replication rule name**, enter `CrossRegion`.
  - Under **Source bucket**, in **Choose a rule scope**, select **Apply to all objects in the bucket**.
  - Under **Destination**, set the following parameters:
    - Leave **Choose a bucket in this account** selected.
    - Click **Browse S3**.
    - Select the `appconfigprod2` bucket.
    - Click **Choose path**.
    - Click **Enable bucket versioning**.
  - Under **IAM role**, click the dropdown menu under **IAM role**, and select **Create new role**.
- Click **Save**.
- When prompted with the **Replicate existing objects**? popup, choose **No, do not replicate existing objects** and click **Submit**.

### Test Replication and Observe Results

- Click the `appconfigprod1` bucket link in the breadcrumb trail navigation at the top of the screen.
- Click **Upload**.
- Either drag a file to the window, or click **Add file** to upload a file of your choice.
- Click **Upload**.
- Once the upload has succeeded, click **Close** in the top-right corner.
- Click the **Buckets** link in the breadcrumb trail navigation at the top of the page.
- Click the `appconfigprod2` bucket to open it.

<Note>
  Note: You should see the file you uploaded to `appconfigprod1`. If it isn't
  there yet, refresh and wait a minute or two for it to appear.
</Note>

## Lab: Creating a Static Website Using S3

### Create S3 Bucket

- In a new browser tab, navigate to the [GitHub repository for the code](https://github.com/ACloudGuru-Resources/Course-Certified-Solutions-Architect-Associate/tree/master/labs/creating-a-static-website-using-amazon-s3).
- Select the `error.html` file.
- Above the code area, click **Raw**.
- Right-click and select **Save Page As**, and save the file as `error.html`.

<Note>
  Note: If you are using Safari as your web browser, ensure you remove `.txt`
  from the end of the filename. Also, ensure the **Format** is **Page Source**.
  When asked whether you want to save the file as plain text, click **Don't
  append**.
</Note>

- Repeat this for the `index.html` file.
- In the AWS Management Console, navigate to S3.
- Click **Create bucket**.
- Set the following values:
  - Bucket name: `my-bucket-` with the AWS account ID or another series of numbers at the end to make it globally unique
  - Region: **US East (N. Virginia) us-east-1**
- In the **Block Public Access settings for this bucket** section, un-check **Block all public access**.
  - Ensure all four permissions restrictions beneath it are also un-checked.
- Check the box to acknowledge that turning off all public access might result in the bucket and its objects becoming public.
- Leave the rest of the settings as their defaults.
- Click **Create bucket**.
- Click the bucket name.
- Click **Upload**.
- Click **Add files**, and upload the `error.html` and `index.html` files you previously saved from GitHub.
- Leave the rest of the settings as their defaults.
- Click **Upload**.
- Click **Close** in the upper right.

### Enable Static Website Hosting

- Click the **Properties** tab.
- Scroll to the bottom of the screen to find the **Static website hosting** section.
- On the right in the **Static website hosting** section, click **Edit**.
- On the **Edit static website hosting** page, set the following values:
  - **Static website hosting**: Select **Enable**.
  - **Hosting type**: Select **Host a static website**.
  - **Index document**: Enter `index.html`.
  - **Error document**: Enter `error.html`.
- Click **Save changes**.
- In the **Static website hosting** section, open the listed endpoint URL in a new browser tab. Once opened, you'll see a `403 Forbidden` error message.

### Apply Bucket Policy

- Back in S3, click the **Permissions** tab.
- In the **Bucket policy** section, click **Edit**.
- Above the code entry box, copy the bucket ARN.
- On the right, click **Policy generator**.
- Select the following values:
  - **Select Type of Policy**: Select **S3 Bucket Policy**.
  - **Effect**: Select **Allow**.
  - **Principal**: Enter `*`.
  - **Actions**: Select `GetObject`.
  - **Amazon Resource Name (ARN)**: Paste the name you added earlier followed by `/*` so the policy applies to all objects within the bucket.
- Click **Add Statement** > **Generate Policy**.

```json
{
  "Id": "Policy1746180536273",
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "Stmt1746180534670",
      "Action": ["s3:GetObject"],
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::my-bucket-471112626263/*",
      "Principal": "*"
    }
  ]
}
```

- Copy the displayed policy, and go back to the bucket policy screen and paste the JSON. You can ignore any errors.
- Click **Save changes**.
- Refresh the browser tab with the static website (the endpoint URL you opened earlier). This time, the site should load correctly.
- Add a `/` at the end of the URL and some random letters (anything that's knowingly an error). This will display your `error.html` page.
